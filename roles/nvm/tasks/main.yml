---
- name: clone nvm.git
  sudo: yes
  git:
    repo: https://github.com/creationix/nvm.git
    dest: "{{nvm_root}}"

- name: set node.js env file
  sudo: yes
  template: src=nvm.sh.j2 dest=/etc/profile.d/nvm.sh

- name: make group of nvm
  sudo: yes
  group: name=nvm

- name: change group of nvm
  sudo: yes
  shell: chgrp -R nvm {{nvm_root}}

- name: change mode of nvm
  sudo: yes
  shell: chmod g+rwXs {{nvm_root}}


- name: add user to rbenv group
  sudo: yes
  user: name={{user}} append=yes groups=nvm

- name: install node.js with nvm
  shell: nvm install {{node_version}}

- name: set node.js {{node_version}} for system
  shell: nvm alias default v{{node_version}}

- name: install coffee-script
  shell: npm install -g coffee-script
